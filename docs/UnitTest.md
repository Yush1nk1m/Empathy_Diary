# 단위 테스트

## Models

[[Test Code](../backend/models/)]

모델에 대한 단위 테스트는 간단히 `static initiate`, `static associate` 메소드의 호출 여부만을 테스트한다. 그러므로 상세 문서는 기술하지 않는다.

## Middlewares

[[Test Code](../backend/middlewares/index.test.js)]

`passport`와 관련된 미들웨어만 존재한다. 이에 대한 단위 테스트는 간단히 로그인 중 로그인, 로그인 중 로그아웃, 로그아웃 후 로그인, 로그아웃 후 로그아웃에 대한 단위 테스트만 작성하였다. 그러므로 상세 문서는 기술하지 않는다.

## Controllers

### User Controller

[[Test Code](../backend/controllers/user.test.js)]

#### [u-01] 회원 정보 조회

본 섹션은 [u-01](./API.md#u-01-회원-정보-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-01 | 회원 정보 조회 성공 | uut-01-1 | 상태 코드 200 응답 조건 |
| u-01 | 회원 정보 조회 실패 | uut-01-2 | 서버 에러 발생 조건 |

#### [u-02] 회원 가입

본 섹션은 [u-02](./API.md#u-02-회원-가입)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-02 | 회원 가입 성공 | uut-02-1 | 상태 코드 200 응답 조건 |
| u-02 | 확인 비밀번호 불일치 | uut-02-2 | 상태 코드 400 응답 조건 |
| u-02 | ID 중복 | uut-02-3 | 상태 코드 409 응답 조건 |
| u-02 | 첫 번째 findOne 수행 중 에러 | uut-02-4 | 서버 에러 발생 조건 |

#### [u-03] 로그인

본 섹션은 [u-03](./API.md#u-03-로그인)에 대한 단위 테스트의 기술이다.합

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-03 | 로그인 성공 | uut-03-1 | 상태 코드 200 응답 조건 |
| u-03 | 로그인 에러 | uut-03-2 | 서버 에러 발생 조건 |
| u-03 | 사용자 정보 불일치 | uut-03-3 | 상태 코드 400 응답 조건 |
| u-03 | 인증 에러 | uut-03-4 | 서버 에러 발생 조건 |

#### [u-04] 회원 정보 수정

본 섹션은 [u-04](./API.md#u-04-회원-정보-수정)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-04 | 회원 정보 수정 성공 | uut-04-1 | 상태 코드 200 응답 조건 |
| u-04 | 새 비밀번호 해싱 중 에러 | uut-04-2 | 서버 에러 발생 조건 |
| u-04 | 현재 비밀번호 불일치 | uut-04-3 | 상태 코드 400 응답 조건 |
| u-04 | 변경될 정보 없음 | uut-04-4 | 상태 코드 400 응답 조건 |
| u-04 | 확인 비밀번호 불일치 | uut-04-5 | 상태 코드 400 응답 조건 |
| u-04 | 첫 번째 findOne 수행 중 에러 | uut-04-6 | 서버 에러 발생 조건 |
| u-04 | 요청 바디 데이터 존재 | uut-04-7 | 조회한 로우에 값 저장 연산 발생 조건 |
| u-04 | 요청 바디에 새로운 닉네임 없음 | uut-04-8 | 조회한 로우에 값을 저장하지 않는 조건 |
| u-04 | 요청 바디에 새로운 비밀번호 없음 | uut-04-9 | 조회한 로우에 값을 저장하지 않는 조건 |
| u-04 | 첫 번째 user.save 수행 중 에러 | uut-04-10 | 서버 에러 발생 조건 |

#### [u-05] 회원 탈퇴

본 섹션은 [u-05](./API.md#u-05-회원-탈퇴)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-05 | 회원 탈퇴 성공 | uut-05-1 | 상태 코드 200 응답 조건 |
| u-05 | 확인 메시지 불일치 | uut-05-2 | 상태 코드 400 응답 조건 |
| u-05 | 첫 번째 destroy 수행 중 에러 | uut-05-3 | 서버 에러 발생 조건 |

#### [u-06] 로그아웃

본 섹션은 [u-06](./API.md#u-06-로그아웃)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-06 | 로그아웃 성공 | uut-06-1 | 상태 코드 200 응답 조건 |

### Post Controller

[[Test Code](../backend/controllers/post.test.js)]

#### [p-01] 모든 일기 조회

본 섹션은 [p-01](./API.md#p-01-모든-일기-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-01 | 작성한 일기 없음 | put-01-1 | 빈 리스트 및 상태 코드 200 응답 조건 |
| p-01 | 첫 번째 findAll 수행 중 에러 | put-01-2 | 서버 에러 발생 조건 |
| p-01 | 두 번째 findAll 수행 중 에러 | put-01-3 | 서버 에러 발생 조건 |
| p-01 | 첫 번째 getSentiment 수행 중 에러 | put-01-4 | 서버 에러 발생 조건 |
| p-01 | 모든 일기 조회 성공 | put-01-5 | 내용이 있는 리스트 및 상태 코드 200 응답 조건 |

#### [p-02] 특정 일기 조회

본 섹션은 [p-02](./API.md#p-02-특정-일기-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-02 | 숫자가 아닌 쿼리 파라미터 전달 | put-02-1 | 다른 컨트롤러로 이동 |
| p-02 | 조회된 일기 없음 | put-02-2 | 상태 코드 404 응답 조건 |
| p-02 | 일기 작성자 불일치 | put-02-3 | 상태 코드 403 응답 조건 |
| p-02 | 첫 번째 findOne 수행 중 에러 | put-02-4 | 서버 에러 발생 조건 |
| p-02 | 첫 번째 findAll 수행 중 에러 | put-02-5 | 서버 에러 발생 조건 |
| p-02 | 첫 번째 getSentiment 수행 중 에러 | put-02-6 | 서버 에러 발생 조건 |
| p-02 | 특정 일기 조회 성공 | put-02-7 | 상태 코드 200 응답 조건 |

#### [p-03] 일기 등록

본 섹션은 [p-03](./API.md#p-03-일기-등록)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-03 | 일기 등록 성공 | put-03-1 | 상태 코드 200 응답 조건 |
| p-03 | 일기 내용 없음 | put-03-2 | 상태 코드 400 응답 조건 |
| p-03 | 첫 번째 create 수행 중 에러 | put-03-3 | 서버 에러 발생 조건 |
| p-03 | 두 번째 create 수행 중 에러 | put-03-4 | 서버 에러 발생 조건 |
| p-03 | 세 번째 create 수행 중 에러 | put-03-5 | 서버 에러 발생 조건 |

#### [p-04] 일기 내용 수정

본 섹션은 [p-04](./API.md#p-04-일기-내용-수정)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-04 | 유효하지 않은 요청 바디 | put-04-1 | 상태 코드 400 응답 조건 |
| p-04 | 수정할 일기 내용 없음 | put-04-2 | 상태 코드 400 응답 조건 |
| p-04 | 첫 번째 findOne 수행 중 에러 | put-04-3 | 서버 에러 발생 조건 |
| p-04 | 조회된 일기 없음 | put-04-4 | 상태 코드 404 응답 조건 |
| p-04 | 작성자 불일치 | put-04-5 | 상태 코드 403 응답 조건 |
| p-04 | 첫 번째 save 수행 중 에러 | put-04-6 | 서버 에러 발생 조건 |
| p-04 | 첫 번째 destroy 수행 중 에러 | put-04-7 | 서버 에러 발생 조건 |
| p-04 | 두 번째 destroy 수행 중 에러 | put-04-8 | 서버 에러 발생 조건 |
| p-04 | 첫 번째 create 수행 중 에러 | put-04-9 | 서버 에러 발생 조건 |
| p-04 | 두 번째 create 수행 중 에러 | put-04-10 | 서버 에러 발생 조건 |
| p-04 | 일기 내용 수정 성공 | put-04-11 | 상태 코드 200 응답 조건 |

#### [p-05] 일기 삭제

본 섹션은 [p-05](./API.md#p-05-일기-삭제)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-05 | 일기 삭제 성공 | put-05-1 | 상태 코드 200 응답 조건 |
| p-05 | 첫 번째 findOne 수행 중 에러 | put-05-2 | 서버 에러 발생 조건 |
| p-05 | 조회된 일기 없음 | put-05-3 | 상태 코드 404 응답 조건 |
| p-05 | 작성자 불일치 | put-05-4 | 상태 코드 403 응답 조건 |
| p-05 | 첫 번째 destroy 수행 중 에러 | put-05-5 | 서버 에러 발생 조건 |

#### [p-06] 특정 기간 일기 조회

본 섹션은 [p-06](./API.md#p-06-특정-기간-동안-작성한-모든-일기-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-06 | 작성한 일기 없음 | put-06-1 | 빈 리스트 및 상태 코드 200 응답 조건 |
| p-06 | 쿼리 파라미터 없음 | put-06-2 | 상태 코드 400 응답 조건 |
| p-06 | 쿼리 파라미터 파싱 불가 | put-06-3 | 상태 코드 400 응답 조건 |
| p-06 | 첫 번째 findAll 수행 중 에러 | put-06-4 | 서버 에러 발생 조건 |
| p-06 | 두 번째 findAll 수행 중 에러 | put-06-5 | 서버 에러 발생 조건 |
| p-06 | 첫 번째 getSentiment 수행 중 에러 | put-06-6 | 서버 에러 발생 조건 |
| p-06 | 일기 조회 성공 | put-06-7 | 상태 코드 200 응답 조건 |

### Advice Controller

[[Test Code](../backend/controllers/advice.test.js)]

#### [a-01] 오늘의 조언 조회

본 섹션은 [a-01](./API.md#a-01-오늘-자신에게-온-조언-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| a-01 | 첫 번째 getPosts 수행 중 에러 | aut-01-1 | 서버 에러 발생 조건 |
| a-01 | 첫 번째 getEmotions 수행 중 에러 | aut-01-2 | 서버 에러 발생 조건 |
| a-01 | 첫 번째 findAll 수행 중 에러 | aut-01-3 | 서버 에러 발생 조건 |
| a-01 | 조언 조회 성공 | aut-01-4 | 상태 코드 200 응답 조건 |

#### [a-02] 작성한 모든 조언 조회

본 섹션은 [a-02](./API.md#a-02-작성한-모든-조언-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| a-02 | 첫 번째 findAll 수행 중 에러 | aut-02-1 | 서버 에러 발생 조건 |
| a-02 | 조언 조회 성공 | aut-02-2 | 상태 코드 200 응답 조건 |

#### [a-03] 조언 작성

본 섹션은 [a-03](./API.md#a-03-조언-작성)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| a-03 | 유효하지 않은 요청 바디 | aut-03-1 | 상태 코드 400 응답 조건 |
| a-03 | 조언 내용 없음 | aut-03-2 | 상태 코드 400 응답 조건 |
| a-03 | 첫 번째 create 수행 중 에러 | aut-03-3 | 서버 에러 발생 조건 |
| a-03 | 첫 번째 getPosts 수행 중 에러 | aut-03-4 | 서버 에러 발생 조건 |
| a-03 | 첫 번째 getEmotions 수행 중 에러 | aut-03-5 | 서버 에러 발생 조건 |
| a-03 | 첫 번째 addEmotions 수행 중 에러 | aut-03-6 | 서버 에러 발생 조건 |
| a-03 | 조언 작성 성공 | aut-03-7 | 상태 코드 200 응답 조건 |

#### [a-04] 조언 내용 수정

본 섹션은 [a-04](./API.md#a-04-조언-내용-수정)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| a-04 | 유효하지 않은 요청 바디 | aut-04-1 | 상태 코드 400 응답 조건 |
| a-04 | 유효하지 않은 요청 바디 | aut-04-2 | 상태 코드 400 응답 조건 |
| a-04 | 첫 번째 findOne 수행 중 에러 | aut-04-3 | 서버 에러 발생 조건 |
| a-04 | 작성자 불일치 | aut-04-4 | 상태 코드 403 응답 조건 |
| a-04 | 첫 번째 save 수행 중 에러 | aut-04-5 | 서버 에러 발생 조건 |
| a-04 | 조언 내용 수정 성공 | aut-04-6 | 상태 코드 200 응답 조건 |

#### [a-05] 조언 삭제

본 섹션은 [a-05](./API.md#a-05-조언-삭제)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| a-05 | 부적절한 요청 파라미터 형식 | aut-05-1 | 에러 처리 미들웨어 호출 조건 |
| a-05 | 첫 번째 findOne 수행 중 에러 | aut-05-2 | 서버 에러 발생 조건 |
| a-05 | 조회된 조언 없음 | aut-05-3 | 상태 코드 404 응답 조건 |
| a-05 | 작성자 불일치 | aut-05-4 | 상태 코드 403 응답 조건 |
| a-05 | 첫 번째 destroy 수행 중 에러 | aut-05-5 | 서버 에러 발생 조건 |
| a-05 | 조언 삭제 성공 | aut-05-6 | 상태 코드 200 응답 조건 |

### Emotion Controller

[[Test Code](../backend/controllers/emotion.test.js)]

#### [e-01] 누적된 모든 감정 조회

본 섹션은 [e-01](./API.md#e-01-사용자의-누적된-모든-감정-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| e-01 | 첫 번째 findAll 수행 중 에러 | eut-01-1 | 서버 에러 발생 조건 |
| e-01 | 두 번째 findAll 수행 중 에러 | eut-01-2 | 서버 에러 발생 조건 |
| e-01 | 세 번째 findAll 수행 중 에러 | eut-01-3 | 서버 에러 발생 조건 |
| e-01 | 감정 조회 성공 | eut-01-4 | 상태 코드 200 응답 조건 |

#### [e-02] 특정 기간 누적된 모든 감정 조회

본 섹션은 [e-02](./API.md#e-02-특정-기간-동안-누적된-모든-감정-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| e-02 | 불충분한 쿼리 파라미터 | eut-02-1 | 상태 코드 400 응답 조건 |
| e-02 | 유효하지 않은 쿼리 파라미터 값 | eut-02-2 | 상태 코드 400 응답 조건 |
| e-02 | 첫 번째 findAll 수행 중 에러 | eut-02-3 | 서버 에러 발생 조건 |
| e-02 | 두 번째 findAll 수행 중 에러 | eut-02-4 | 서버 에러 발생 조건 |
| e-02 | 세 번째 findAll 수행 중 에러 | eut-02-5 | 서버 에러 발생 조건 |
| e-02 | 감정 조회 성공 | eut-02-6 | 상태 코드 200 응답 조건 |

### Sentiment Controller

[[Test Code](../backend/controllers/sentiment.test.js)]

#### [s-01] 특정 기간 감성 점수 조회

본 섹션은 [s-01](./API.md#s-01-특정-기간-동안의-감성-점수-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| s-01 | 불충분한 쿼리 파라미터 | sut-01-1 | 상태 코드 400 응답 조건 |
| s-01 | 유효하지 않은 쿼리 파라미터 값 | sut-01-2 | 상태 코드 400 응답 조건 |
| s-01 | 첫 번째 findAll 수행 중 에러 | sut-01-3 | 서버 에러 발생 조건 |
| s-01 | 감성 점수 조회 성공 | sut-01-4 | 상태 코드 200 응답 조건 |

### Chatroom Controller

[[Test Code](../backend/controllers/chatroom.test.js)]

#### [cr-01] AI 챗봇과의 대화방 생성

본 섹션은 [cr-01](./API.md#cr-01-ai-챗봇과의-대화방-생성)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| cr-01 | 첫 번째 create 수행 중 에러 | crut-01-1 | 서버 에러 발생 조건 |
| cr-01 | 두 번째 create 수행 중 에러 | crut-01-2 | 서버 에러 발생 조건 |
| cr-01 | 채팅방 생성 성공 | crut-01-3 | 상태 코드 200 응답 조건 |

#### [cr-02] AI 챗봇과의 대화 제출

본 섹션은 [cr-02](./API.md#cr-02-ai-챗봇과의-대화-제출일기-생성)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| cr-02 | 첫 번째 findOne 수행 중 에러 | crut-02-1 | 서버 에러 발생 조건 |
| cr-02 | 조회된 채팅방 없음 | crut-02-2 | 에러 처리 미들웨어 호출 조건 |
| cr-02 | 대화 제출 성공 | crut-02-3 | 상태 코드 200 응답 조건 |

#### [cr-03] AI 챗봇과의 최근 대화 내용 불러오기

본 섹션은 [cr-03](./API.md#cr-03-ai-챗봇과의-최근-대화-내용-불러오기)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| cr-03 | 첫 번째 findOne 수행 중 에러 | crut-03-1 | 서버 에러 발생 조건 |
| cr-03 | 조회된 채팅방 없음 | crut-03-2 | 에러 처리 미들웨어 호출 조건 |
| cr-03 | 첫 번째 findAll 수행 중 에러 | crut-03-3 | 서버 에러 발생 조건 |
| cr-03 | 대화 불러오기 성공 | crut-03-4 | 상태 코드 200 응답 조건 |

#### [cr-04] AI 챗봇에게 메시지 전송

본 섹션은 [cr-04](./API.md#cr-04-ai-챗봇에게-메시지-전송)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| cr-04 | 유효하지 않은 요청 바디 | crut-04-1 | 상태 코드 400 응답 조건 |
| cr-04 | 첫 번째 findOne 수행 중 에러 | crut-04-2 | 서버 에러 발생 조건 |
| cr-04 | 조회된 채팅방 없음 | crut-04-3 | 에러 처리 미들웨어 호출 조건 |
| cr-04 | 첫 번째 create 수행 중 에러 | crut-04-4 | 서버 에러 발생 조건 |
| cr-04 | 첫 번째 findAll 수행 중 에러 | crut-04-5 | 서버 에러 발생 조건 |
| cr-04 | 두 번째 create 수행 중 에러 | crut-04-6 | 서버 에러 발생 조건 |
| cr-04 | 메시지 전송 성공 | crut-04-7 | 상태 코드 200 응답 조건 |